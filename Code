const int relePin = 2;
const int touchPin = 4;
unsigned long interval = 1800000;  // Interval, teď může měnit hodnotu
const unsigned long maxInterval = 21600000;

void setup() {
  pinMode(relePin, OUTPUT);    // Rele jako výstup
  digitalWrite(relePin, LOW);  // Relé na začátku vypnuto
  pinMode(touchPin, INPUT);    // Tlačítko / dotyk na pinu 3 jako vstup
  pinMode(13, OUTPUT);          // LED na pinu 13 jako výstup
}

void loop() {
  if (interval > 600000) interval = 600000;
  int buttonState = digitalRead(touchPin); // Čteme stav tlačítka

  if (buttonState == HIGH) {
    digitalWrite(13, LOW);  // Rozsviť LED
    digitalWrite(relePin, LOW);  // Sepni relé (aktivuj elektromagnet)
    delay(500); // Drž relé sepnuté 500 ms
    digitalWrite(relePin, HIGH); // Vypni relé (deaktivuj elektromagnet)
    delay(interval); // Pauza podle intervalu

    interval = interval * 1.2; // Zvětši interval o 1.2x
      if (interval > maxInterval) {
      interval = maxInterval;
    }
  } else {
    // Pokud tlačítko není stisknuté:
    digitalWrite(13, HIGH);   // LED zhasni
    digitalWrite(relePin, HIGH); // Relé vypnuto 
  }
}
